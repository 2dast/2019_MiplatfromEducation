<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form Height="648" Id="Lookup" Left="8" OnLoadCompleted="Lookup_OnLoadCompleted" PidAttrib="7" Title="New&#32;Form" Top="8" Ver="1.0" Width="920" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="Services_List" OnColumnChanged="ds_List_OnColumnChanged"></Dataset>
			<Dataset DataSetType="Dataset" Id="Services_Level">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="LEVEL" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
		</Datasets>
		<Grid AutoFit="TRUE" BindDataset="GDS_Services" BkColor2="default" BoldHead="true" Bottom="408" Enable="true" EndLineColor="default" Height="264" Id="grd_List" InputPanel="FALSE" Left="8" LineColor="default" MinWidth="100" Right="912" TabOrder="1" TabStop="true" Top="144" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="true" VLineColor="default" WheelScrollRow="1" Width="904">
			<contents>
				<format id="Default">
					<columns>
						<col width="39"/>
						<col width="39"/>
						<col width="80"/>
						<col width="80"/>
						<col width="127"/>
						<col width="80"/>
						<col width="80"/>
						<col width="89"/>
						<col width="80"/>
						<col width="80"/>
					</columns>
					<head>
						<cell col="0" display="text"/>
						<cell col="1" display="text" text="no"/>
						<cell col="2" display="text" text="제품명"/>
						<cell col="3" display="text" text="고장증세"/>
						<cell col="4" display="text" text="주소"/>
						<cell col="5" display="text" text="접수일"/>
						<cell col="6" display="text" text="고객명"/>
						<cell col="7" display="text" text="연락처"/>
						<cell col="8" display="text" text="구분"/>
						<cell col="9" display="text" text="NEW_YN"/>
					</head>
					<body>
						<cell col="0" colid="FLAG" display="text"/>
						<cell align="center" col="1" colid="p_id" display="text"/>
						<cell align="center" col="2" colid="p_name" display="text"/>
						<cell align="center" col="3" colid="p_trouble" display="text"/>
						<cell align="center" col="4" colid="addr" display="text"/>
						<cell align="center" col="5" colid="day" display="text"/>
						<cell align="center" col="6" colid="name" display="text"/>
						<cell align="center" col="7" colid="number" display="text"/>
						<cell align="center" col="8" colid="Diff" combocol="CODE" combodataset="GDS_Services_Combo" combotext="CODE_NM" display="text"/>
						<cell align="center" col="9" colid="NEW_YN" display="text"/>
					</body>
				</format>
			</contents>
		</Grid>
		<Static Align="Center" BKColor="BTNSHADOW" Border="RaisedEdge" DkshadowColor="SCROLLBAR" Face3dColor="dimgray" Font="맑은&#32;고딕,14,Bold" Height="120" Hilight3dColor="APPWORKSPACE" Id="st_top" Left="8" ShadowColor="INACTIVECAPTION" TabOrder="2" Text="&#10;조회&#32;컴포넌트&#32;영역" Top="24" Width="896"></Static>
		<Edit Height="21" Id="edt_p_name" Left="96" TabOrder="3" Top="32" Width="121"></Edit>
		<Static Align="Right" Height="13" Id="st_" Left="39" TabOrder="4" Text="제품명" Top="35" Width="49"></Static>
		<Static Align="Right" Height="13" Id="Static0" Left="39" TabOrder="6" Text="고객명" Top="67" Width="49"></Static>
		<Edit Height="21" Id="edt_name" ImeMode="none" Left="96" TabOrder="5" Top="64" Width="121"></Edit>
		<Button Height="56" Id="btn_search" Left="568" OnClick="btn_Lookup" TabOrder="7" Text="서비스&#32;조회" Top="48" Width="224"></Button>
		<Button Height="21" Id="btn_save" Left="816" TabOrder="8" Text="저&#32;장" Top="64" Width="80"></Button>
		<Edit Height="19" Id="edt_number" Left="96" TabOrder="9" Top="96" Width="120"></Edit>
		<Static Height="20" Id="Static2" Left="56" TabOrder="10" Text="연락처" Top="96" Width="37"></Static>
		<Button Font="Tahoma,12" Height="48" Id="Button0" Left="544" OnClick="Button0_OnClick" TabOrder="11" Text="서비스&#32;예약&#32;취소" Top="512" Width="232"></Button>
		<Button Height="21" Id="Button1" Left="808" OnClick="Button1_OnClick" TabOrder="12" Text="예약&#32;변경" Top="96" Width="80"></Button>
		<Static Align="Center" BKColor="darkseagreen" Font="맑은&#32;고딕,14,Bold" Height="216" Id="Static1" Left="8" TabOrder="13" Text="&#10;&#10;입력&#32;Components&#32;영역" Top="408" Width="904"></Static>
		<Edit Font="Tahoma,12" Height="32" Id="edit_p_name" Left="16" TabOrder="14" Top="432" Width="128"></Edit>
		<Static Height="30" Id="Static3" Left="32" TabOrder="15" Text="제품명" Top="416" Width="260"></Static>
		<Static Height="30" Id="Static4" Left="16" TabOrder="16" Text="주소" Top="488" Width="260"></Static>
		<Static Height="30" Id="Static5" Left="16" TabOrder="17" Text="연락처" Top="544" Width="212"></Static>
		<Button Font="Tahoma,12" Height="51" Id="btn_service" Left="544" OnClick="btn_service_OnClick" TabOrder="18" Text="서비스&#32;예약&#32;수정" Top="456" Width="232"></Button>
		<Edit Font="Tahoma,12" Height="40" Id="edit_number" Left="16" TabOrder="19" Top="560" Width="128"></Edit>
		<Edit Font="Tahoma,12" Height="32" Id="edit_addr" Left="16" TabOrder="20" Top="504" Width="128"></Edit>
		<Edit Font="Tahoma,12" Height="48" Id="edit_trouble" Left="152" TabOrder="21" Top="560" Width="296"></Edit>
		<Edit Font="Tahoma,12" Height="32" Id="edit_name" Left="152" TabOrder="22" Top="432" Width="128"></Edit>
		<Static Height="30" Id="Static7" Left="152" TabOrder="23" Text="고객명" Top="416" Width="260"></Static>
		<Static Height="30" Id="Static8" Left="152" TabOrder="24" Text="고장증세" Top="544" Width="260"></Static>
		<Combo BindDataset="GDS_Services" CodeColumn="CODE_NM" Column="Diff" DataColumn="CODE" Font="Tahoma,12" Height="32" Id="com_services" ImeMode="none" InnerDataset="GDS_Services_Combo" Left="152" TabOrder="25" Top="504" Width="128"></Combo>
		<Static Height="24" Id="Static9" Left="152" TabOrder="26" Text="구분" Top="488" Width="96"></Static>
	</Form>
	<Script><![CDATA[
function Lookup_OnLoadCompleted(obj) {

	Services_List.Copy("GDS_Services");
	
	Services_List.AddColumn("FLAG");
	
	Services_Level.Filter("Code!=''");
	
	//alert(Services_List.GetRowCount());
}
// 제품명 (p_name)을 무조건 적어야 검색가능 수정해야함
function btn_Lookup(obj) 

{
//	Services_List.Copy("GDS_Services");

	//Services_List.Filter("p_name =='"+edt_p_name.Text+"'")||("name =='"+edt_name.Text+"'")||("number =='"+edt_number.Text+"' ");


	var pFilter = "";


	if(length(edt_p_name.Value) != 0) {
		if (length(pFilter) !=0) pFilter += " && ";
		
		pFilter += "p_name=="+quote(edt_p_name.Text);
		
		}
		
	if (length(edt_name.Value) !=0) {
		if (length(pFilter) !=0) pFilter += " && ";
		
		pFilter += "name=="+quote(edt_name.Text);
		
		}
		
	if (length(edt_number.Value) !=0) {
		if (length(pFilter) !=0) pFilter += " && ";
		
		pFilter += "number=="+quote(edt_number.Text);
		
		}
		
		GDS_Services.Filter(pFilter);
		
	}

function Button0_OnClick(obj)
{
	var ret;
	ret = dialog("Services::DeleteAlert.xml","",300,300);
	//alert("dialog : return ="+ret);
}

function Button1_OnClick(obj)
{
	go("Services::Services_Change.xml");
}

function btn_save_OnClick(obj)
{
	

	/*for (var i=0; i<GDS_Services.GetRowCount(); i++) {
		if (GDS_Services.GetColumn(i,"FLAG") == "I") {
			GDS_Services.ADDRow();
			GDS_Services.SetColumn(GDS_Services.GetLastRow(),"p_id",GDS_Services.GetLastRow()+1);
			GDS_Services.SetColumn(GDS_Services.GetLastRow(),"p_name",GDS_Services.GetColumn(i, "p_name"));
			GDS_Services.SetColumn(GDS_Services.GetLastRow(),"p_trouble",GDS_Services.GetColumn(i, "p_trouble));
			GDS_Services.SetColumn(GDS_Services.GetLastRow(),"addr",GDS_Services.GetColumn(i, "addr"));
			GDS_Services.SetColumn(GDS_Services.GetLastRow(),"day",GDS_Services.GetColumn(i, "day"));
			GDS_Services.SetColumn(GDS_Services.GetLastRow(),"name",GDS_Services.GetColumn(i, "name"));
			GDS_Services.SetColumn(GDS_Services.GetLastRow(),"number",GDS_Services.GetColumn(i, "number"));
			GDS_Services.SetColumn(GDS_Services.GetLastRow(),"Diff",GDS_Services.GetColumn(i, "Diff"));
			GDS_Services.SetColumn(GDS_Services.GetLastRow(), "NEW_YN", "Y");
			
		} else if (GDS_Services.GetColumn(i, "FLAG") == "U") {
			GDS_Services.SetColumn(GDS_Services.FindRow("p_id",GDS_Services.GetColumn(i, "p_id")),"p_name",GDS_Services.GetColumn(i, "p_id"));
			GDS_Services.SetColumn(GDS_Services.FindRow("p_trouble",GDS_Services.GetColumn(i, "p_id")),"p_trouble",GDS_Services.GetColumn(i, "p_id"));
			GDS_Services.SetColumn(GDS_Services.FindRow("addr",GDS_Services.GetColumn(i, "p_id")),"addr",GDS_Services.GetColumn(i,"addr"));
			GDS_Services.SetColumn(GDS_Services.FindRow("day",GDS_Services.GetColumn(i, "p_id")),"day",GDS_Services.GetColumn(i,"day"));
			GDS_Services.SetColumn(GDS_Services.FindRow("name",GDS_Services.GetColumn(i,"p_id")),"name",GDS_Services.GetColumn(i,"name"));
			GDS_Services.SetColumn(GDS_Services.FindRow("number",GDS_Services.GetColumn(i,"p_id")),"number",GDS_Services.GetColumn(i,"number"));
			GDS_Services.SetColumn(GDS_Services.FindRow("Diff",GDS_Services.GetColumn(i,"p_id")),"Diff",GDS_Services.GetColumn(i,"Diff"));
			
		} else if (GDS_Services.getColumn(i, "FLAG") == "D") {
			GDS_COMPANY.DeleteRow(GDS_Services.FindRow("p_id",GDS_Services.getColumn(i,"p_id")));
			
		}
	}
	btn_Lookup():
	*/		
}

function btn_service_OnClick(obj)
{
	var strpid_lastindex = GDS_Services.GetColumn(GDS_Services.lastrow,"P_ID");
	var intpid_lastindex = toNumber(strpid_lastindex);
	var pluspid_lastindex = intpid_lastindex+1;
	
	GDS_Services.Row();
	
	
	//GDS_Services.SetColumn(GDS_Services.row,"p_id",pluspid_lastindex);
	GDS_Services.Setcolumn(GDS_Services.Row,"p_name",edit_p_name.Text);
	GDS_Services.SetColumn(GDS_Services.Row,"p_trouble",edit_trouble.Text);
	GDS_Services.SetColumn(GDS_Services.Row,"addr",edit_addr.Text);
	//GDS_Services.SetColumn(GDS_Services.row,"day",Calendar0.Text);
	GDS_Services.SetColumn(GDS_Services.Row,"name",edit_name.Text);
	GDS_Services.SetColumn(GDS_Services.Row,"number",edit_number.Text);
	GDS_Services.SetColumn(GDS_Services.Row,"NEW_YN","Y");
	GDS_Services.Setcolumn(GDS_Services.Row,"Diff",com_services.Value);
	
	btn_Lookup();
}	
]]></Script>
</Window>